<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Картинка и Убийцы</title>
    <style>
        .centered-photo {
            text-align: center;
            margin: 20px;
        }

        .non-square-photo {
            text-align: center;
            margin: 20px;
        }

        .non-square-photo img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div class="centered-photo">
        <img src="regen.png" alt="regen" />
    </div>
    <div class="non-square-photo">
        <img src="" alt="Убийца" />
    </div>

    <script>
        // Функция для генерации случайного целого числа от 0 до max (включительно)
        function getRandomInt(max) {
            return Math.floor(Math.random() * (max + 1));
        }

        // Обработчик клика по картинке regen.png
        document.querySelector('.centered-photo img').addEventListener('click', function() {
            console.log('Картинка regen нажата'); // Проверка клика

            // Загружаем killers.json
            fetch('killers.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Ошибка сети: ' + response.status);
                    }
                    return response.json();
                })
                .then(data => {
                    // Проверка данных
                    console.log('Данные из killers.json:', data); // Убедитесь, что данные правильные

                    // Проверка структуры данных
                    if (!data || !data.killers || !Array.isArray(data.killers) || data.killers.length === 0) {
                        throw new Error('Некорректные данные в killers.json');
                    }

                    // Выбираем случайный элемент
                    const randomKillerIndex = getRandomInt(data.killers.length - 1);
                    const selectedKiller = killersArray[randomKillerIndex];

                    console.log('Выбранный убийца:', selectedKiller); // Лог выбранного убийцы

                    if (selectedKiller && selectedKiller.photo_main) {
                        // Обновляем изображение
                        const nonSquarePhoto = document.querySelector('.non-square-photo img');
                        if (nonSquarePhoto) {
                            const newSrc = `killers/${selectedKiller.photo_main}`;
                            console.log('Обновляем изображение:', newSrc);
                            nonSquarePhoto.src = newSrc;
                            nonSquarePhoto.alt = selectedKiller.name_ru;
                        } else {
                            console.error('Не удалось найти элемент для обновления изображения');
                        }
                    } else {
                        console.error('Выбранный убийца не имеет корректного свойства photo_main');
                    }
                })
                .catch(error => console.error('Ошибка загрузки или обработки killers.json:', error));
        });
    </script>
</body>
</html>
